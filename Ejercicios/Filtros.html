<!DOCTYPE html>
<html>
	<head>
		<meta charset="ISO-8859-1">
		<title>Ejercicio: filtros</title>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
		<script src="../angular.js"></script>
	</head>
	<body ng-app="miApp" ng-controller="mainController">
		<div class="container">
			<h1>Ejercicio: filtros</h1>
	
			<form name="addFormulario">
				<div class="form-group row"> 
					<label class="col-sm-2 form-control-label">Nombre de persona:</label>
					<div class="col-sm-10">
						<input class="form-control" type="text" name="nombre" ng-model="nombre" placeholder="Introduzca el nombre" >
					</div> 
				</div>
				<div class="form-group row"> 
					<label class="col-sm-2 form-control-label">Ciudad:</label>
					<div class="col-sm-10">
						<input class="form-control" type="text" name="ciudad" ng-model="ciudad" placeholder="Introduzca la ciudad" >
					</div> 
				</div>
				
				<div class="form-group row">  
					<div class="col-sm-offset-2 col-sm-10">
						<button type="submit" class="btn btn-success" id="submit" ng-click="guardar()">Guardar</button>
					</div>
				<div> 
			</form><br/><br/>
			
			<section>
				<h2>Listado de personas: </h2>

				<form name="buscarFormulario">
					<div class="form-group row">  
						<label class="col-sm-2 form-control-label">Buscar:</label>
						<div class="col-sm-10">
							<input class="form-control" type="text" ng-model="filtro" placeholder="Filtrar resultados">
						</div>
					<div> 
				</form><br/>
				
				<ul>
					<li ng-repeat="item in personas | filter: {nombre:filtro}">
						{{item.nombre}} - {{item.ciudad | uppercase}}
					</li>
				</ul>
			</section>	
			
		</div>
				
		<script>
			var app = angular.module("miApp", []);
			app.controller("mainController", ['$scope', function($scope) {
				$scope.personas = [];
				$scope.guardar = function() {
					var item = {
						nombre: $scope.nombre,
						ciudad: $scope.ciudad,
					};
					$scope.personas.push(item);
					resetear();
				};
				function resetear(){ // Reset form fields
					$scope.nombre = "";
					$scope.ciudad = "";
				}
			}]);
		</script>


	</body>
</html>